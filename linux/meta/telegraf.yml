{%- from "linux/map.jinja" import monitoring with context %}
agent:
  input:
    cpu:
      percpu: false
      totalcpu: true
    disk:
      ignore_fs:
        - aufs
        - rootfs
        - sysfs
        - proc
        - devtmpfs
        - devpts
        - tmpfs
        - fusectl
        - cgroup
        - overlay
    diskio:
    kernel:
    net:
    mem:
    nstat:
      fieldpass:
        - packet_drop
        - time_squeeze
    processes:
    swap:
    system:
    procstat:
      process:
        sshd:
          exe: sshd
        cron:
          exe: cron
    linux_sysctl_fs:
{%- if monitoring.bond_status.interfaces is defined and monitoring.bond_status.interfaces %}
    bond:
      template: linux/files/telegraf.conf
{%- if monitoring.bond_status.interfaces is list %}
      bond_interfaces: {{ monitoring.bond_status.interfaces }}
{%- endif %}
{%- if monitoring.bond_status.host_proc is defined %}
      host_proc: {{ monitoring.bond_status.host_proc }}
{%- endif %}
{%- endif %}
